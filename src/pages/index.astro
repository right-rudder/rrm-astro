---
import BaseLayout from "../layouts/BaseLayout.astro";
import homePage from "../data/homePage";
import HeaderScreen from "../components/HeaderScreen.astro";
import Partners from "../components/Partners.astro";
import CaseStudiesVideo from "../components/CaseStudiesVideo.astro";
import Testimonials from "../components/Testimonials.astro";
import WhyUs from "../components/WhyUs.astro";
import ServicesGrid from "../components/ServicesGrid.astro";
import FlyWithUsCTA from "../components/FlyWithUsCTA.astro";
import OurClientsMarquee from "../components/OurClientsMarquee.astro";
import BlogFeed from "../components/BlogFeed.astro";
import BlogFeedTop from "../components/BlogFeedTop.astro";
import GenericCTA from "../components/GenericCTA.astro";
import ScreenCTA from "../components/ScreenCTA.astro";
import IntroVideo from "../components/IntroVideo.astro";
import {
  generateKeywords,
  generateFAQSchema,
  AVIATION_KEYWORDS,
  KEYWORD_STRATEGY,
  TARGET_LOCATIONS,
} from "../utils/seo";
import MastermindEventDetails from "../components/MastermindEventDetails.astro";
import { SITE_DESCRIPTION } from "../consts";

const { data } = homePage;

// Generate comprehensive keywords for homepage
const enhancedKeywords = generateKeywords(
  AVIATION_KEYWORDS.primary.slice(0, 6), // Top 6 primary keywords
  TARGET_LOCATIONS.slice(0, 20), // Top 20 target locations
  [
    // Joined keywords from KEYWORD_STRATEGY
    ...KEYWORD_STRATEGY.marketSegment.slice(0, 3), // Top 3 market segments
    ...KEYWORD_STRATEGY.customerDefining.slice(0, 3), // Top 3 customer defining keywords
    ...KEYWORD_STRATEGY.productDefining.slice(0, 3), // Top 3 service offerings
    ...KEYWORD_STRATEGY.serviceSpecific.slice(0, 3), // Top 3 service-specific keywords
    ...KEYWORD_STRATEGY.competitor.slice(0, 3), // Top 3 competitor keywords
    ...KEYWORD_STRATEGY.longTail.slice(0, 3), // Top 3 long-tail keywords
    ...KEYWORD_STRATEGY.midTail.slice(0, 3), // Top 3 mid-tail keywords
    ...KEYWORD_STRATEGY.shortTail.slice(0, 3), // Top 3 short-tail keywords
    ...KEYWORD_STRATEGY.intentTargeting.transactional.slice(0, 3), // Top 3 transactional keywords
    ...KEYWORD_STRATEGY.intentTargeting.informational.slice(0, 3), // Top 3 informational keywords
    ...KEYWORD_STRATEGY.intentTargeting.navigational.slice(0, 3), // Top 3 navigational keywords
    ...KEYWORD_STRATEGY.lsi.slice(0, 3), // Top 3 LSI keywords
    ...KEYWORD_STRATEGY.phraseMatch.slice(0, 3), // Top 3 phrase-match keywords
    ...KEYWORD_STRATEGY.exactMatch.slice(0, 3), // Top 3 exact-match keywords
    ...KEYWORD_STRATEGY.relatedVertical.slice(0, 3), // Top 3 related vertical keywords
    ...KEYWORD_STRATEGY.locational.slice(0, 3), // Top 3 locational keywords
    ...KEYWORD_STRATEGY.evergreen, // Evergreen keywords
    ...KEYWORD_STRATEGY.informational.slice(0, 3), // Top 3 informational keywords
    ...KEYWORD_STRATEGY.transactional.slice(0, 3), // Top 3 transactional keywords
  ]
);

// Generate FAQ schema for homepage
const homepageFAQs = [
  {
    question: "What is flight school marketing?",
    answer:
      "Flight school marketing involves specialized digital marketing strategies designed to help aviation academies and pilot training schools attract more student pilots, increase enrollment, and grow their business through SEO, PPC, social media, and targeted advertising.",
  },
  {
    question: "How can Right Rudder Marketing help my flight school?",
    answer:
      "Right Rudder Marketing specializes in aviation marketing with proven strategies that help flight schools double, triple, or even 10X their student enrollment through custom websites, SEO optimization, Google Ads management, and comprehensive digital marketing campaigns.",
  },
  {
    question:
      "What makes Right Rudder Marketing different from other marketing agencies?",
    answer:
      "We exclusively focus on aviation businesses and flight schools, giving us deep industry expertise. We're members of FSANA, NBAA, and NAFI, and have helped over 100 flight schools grow their student enrollment with aviation-specific marketing strategies.",
  },
];

const faqSchema = generateFAQSchema(homepageFAQs);
---

<BaseLayout
  siteTitle={data.pageTitle}
  siteDescription={SITE_DESCRIPTION}
  keywords={enhancedKeywords}
>
  <!-- FAQ Schema for featured snippets -->
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <!-- HEADER -->
  <HeaderScreen content={data.header} />

  <IntroVideo />

  <OurClientsMarquee data={data.ourClients} />

  <CaseStudiesVideo
    upperHeading={data.caseStudies.upperHeading}
    heading={data.caseStudies.heading}
    cases={data.caseStudies.cases}
  />

  <ScreenCTA data={data.bookCTA} />

  <Partners
    heading={data.memberOf.heading}
    organizations={data.memberOf.organizations}
  />

  <Testimonials
    upperHeading={data.testimonials.upperHeading}
    heading={data.testimonials.heading}
    quotes={data.testimonials.quotes}
  />

  <WhyUs
    upperHeading={data.whyUs.upperHeading}
    heading={data.whyUs.heading}
    description={data.whyUs.description}
    team={data.whyUs.team}
    marketing={data.whyUs.marketingSystem}
    button={data.whyUs.btn}
  />

  <ServicesGrid
    upperHeading={data.services.upperHeading}
    heading={data.services.heading}
    services={data.services.servs}
  />

  <GenericCTA data={data.gmbCTA} />

  <!-- <MastermindEventDetails data={data.eventDetails} /> -->

  <BlogFeed data={data.blogfeed} />

  <BlogFeedTop data={data.blogfeedtop} />

  <FlyWithUsCTA data={data.flyWithUsCTA} />
</BaseLayout>
